(this["webpackJsonpnhl-visualizer"]=this["webpackJsonpnhl-visualizer"]||[]).push([[0],{32:function(e,a,t){},34:function(e,a,t){},56:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t.n(s),o=t(4),r=t.n(o),c=(t(32),t(11)),i=t(3),l=t.n(i),u=t(5),h=t(61),m=(t(34),function(e){var a=e.homeStats.shots+e.homeStats.missed+e.awayStats.blocks,t=a/(a+(e.awayStats.shots+e.awayStats.missed+e.homeStats.blocks))*100;return{home:t,away:100-t}}),d=function(e){var a=function(e){var a=0,t=0;if(1==e.homeStats.goalies.length)a=e.homeStats.goalies[0].savePercentage;else{var s=0;e.homeStats.goalies.forEach((function(e){s+=e.savePercentage})),a=s/e.homeStats.goalies.length}1==e.awayStats.goalies.length?t=e.awayStats.goalies[0].savePercentage:(s=0,e.awayStats.goalies.forEach((function(e){s+=e.savePercentage})),t=s/e.awayStats.goalies.length);return{home:a,away:t}}(e),t=function(e){return{home:100*Math.round(e.homeStats.goals/e.homeStats.shots),away:100*Math.round(e.awayStats.goals/e.awayStats.shots)}}(e);return{home:a.home+t.home,away:a.away+t.away}},p=t(13),v=t.n(p),g=["GOAL","SHOT","MISSED_SHOT","BLOCKED_SHOT"],f=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var s="https://statsapi.web.nhl.com/api/v1/schedule?startDate=".concat(a,"&endDate=").concat(a);v.a.get(s).then((function(s){if(console.log("raw: ",s),s.data.dates&&1===s.data.dates.length){console.log("in here");var n=[];s.data.dates[0].games.forEach((function(e){var a=e.gamePk,t=e.teams.home.team.id,s=e.teams.away.team.id,o=e.teams.away.score,r={gamePk:a,homeTeamID:t,homeTeamScore:e.teams.home.score,awayTeamID:s,awayTeamScore:o,homeTeamName:e.teams.home.team.name,awayTeamName:e.teams.away.team.name};n.push(r)}));var o={date:a,games:n};return console.log("output: ",o),e(o)}return t(null)})).catch((function(){return t(null)}))})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var s="https://statsapi.web.nhl.com/api/v1/game/".concat(a,"/feed/live");v.a.get(s).then((function(t){console.log("raw: ",t);var s=t.data.liveData.plays.scoringPlays,n=t.data.liveData.plays.playsByPeriod,o=n[2].endIndex,r=n[1].startIndex,c=n[1].endIndex,i=t.data.gameData.teams.home.id,l=t.data.gameData.teams.away.id,u={home:0,away:0},h=[];t.data.liveData.plays.allPlays.forEach((function(e){if(g.includes(e.result.eventTypeId)&&e.about.eventIdx<=o){var a,t=e.about.eventIdx;if(r<=t&&t<=c)a={x:-parseInt(e.coordinates.x),y:-parseInt(e.coordinates.y)};else a=e.coordinates;var s=e.result.eventTypeId,n=e.team.id,l=[];e.players.forEach((function(e){var a={id:e.player.id,fullName:e.player.fullName,playerType:e.playerType};l.push(a)}));var m={teamID:n,coordinates:a,eventIDx:t,eventTypeID:s,players:l};"MISSED_SHOT"===m.eventTypeID&&(m.teamID===i?u.home+=1:u.away+=1),h.push(m)}}));var m=t.data.liveData.boxscore.teams.home.teamStats.teamSkaterStats,d=m.goals,p=m.blocked,v=m.shots,f=t.data.liveData.linescore.periods[0].home.rinkSide,y=t.data.liveData.boxscore.teams.home.goalies,S=[];y.forEach((function(e){var a="ID".concat(e),s=t.data.liveData.boxscore.teams.home.players[a],n={id:s.person.id,saves:s.stats.goalieStats.saves,shots:s.stats.goalieStats.shots,savePercentage:s.stats.goalieStats.savePercentage};S.push(n)}));var w={startingRinkSide:f,id:i,goals:d,shots:v,blocks:p,goalies:S,missed:u.home},b=t.data.liveData.boxscore.teams.away.teamStats.teamSkaterStats,j=b.goals,x=b.blocked,O=b.shots,D=t.data.liveData.linescore.periods[0].away.rinkSide,P=t.data.liveData.boxscore.teams.away.goalies,k=[];P.forEach((function(e){var a="ID".concat(e),s=t.data.liveData.boxscore.teams.away.players[a],n={id:s.person.id,saves:s.stats.goalieStats.saves,shots:s.stats.goalieStats.shots,savePercentage:s.stats.goalieStats.savePercentage};k.push(n)}));var I={startingRinkSide:D,id:l,goals:j,shots:O,blocks:x,goalies:k,missed:u.away},T={gamePK:a,scoringPlays:s,periodPlays:n,allPlays:h,homeStats:w,awayStats:I};return console.log("details: ",T),e(T)})).catch((function(){return t(null)}))})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=t(1),w=function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(a).then((function(e){j(e)}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),a=Object(s.useState)(null),t=Object(c.a)(a,2),n=t[0],o=t[1],r=Object(s.useState)(0),i=Object(c.a)(r,2),p=i[0],v=i[1],g=Object(s.useState)(null),w=Object(c.a)(g,2),b=w[0],j=w[1],x=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("2021-12-04").then((function(e){o(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){0!==p&&e(p)}),[p]),Object(s.useEffect)((function(){x()}),[]),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("h1",{children:"NHL Scoring Visualizer"}),Object(S.jsx)("p",{children:"Pick a game and see some interesting scoring stats."}),Object(S.jsx)("p",{children:"Made using the public NHL API."}),n&&n.games.map((function(e,a){return Object(S.jsxs)("div",{className:"card level-3",onClick:function(){v(e.gamePk)},children:[Object(S.jsxs)("h5",{children:[e.awayTeamName," vs ",e.homeTeamName]}),Object(S.jsxs)("p",{children:[e.awayTeamScore," - ",e.homeTeamScore," "]})]},a)})),0!==p&&b&&Object(S.jsx)(h.a,{open:0!==p,onClose:function(){v(0)},children:Object(S.jsxs)("div",{className:"card level-3",children:[Object(S.jsx)("p",{children:b.gamePK}),Object(S.jsxs)("p",{children:["Home Corsi: ",m(b).home,"%"]}),Object(S.jsxs)("p",{children:["Away Corsi: ",m(b).away,"%"]}),Object(S.jsxs)("p",{children:["Home PDO: ",d(b).home]}),Object(S.jsxs)("p",{children:["Away PDO: ",d(b).away]})]})})]})},b=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,62)).then((function(a){var t=a.getCLS,s=a.getFID,n=a.getFCP,o=a.getLCP,r=a.getTTFB;t(e),s(e),n(e),o(e),r(e)}))};r.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(w,{})}),document.getElementById("root")),b()}},[[56,1,2]]]);
//# sourceMappingURL=main.ae31b9e6.chunk.js.map